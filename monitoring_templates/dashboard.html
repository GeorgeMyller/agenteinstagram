
    <!DOCTYPE html>
    <html>
    <head>
        <title>Instagram Posting Monitor</title>
        <meta http-equiv="refresh" content="30">
        <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1, h2 { color: #3b5998; }
            .stats-container { display: flex; flex-wrap: wrap; }
            .stat-box { 
                background-color: #f0f2f5; 
                border-radius: 5px; 
                padding: 20px; 
                margin: 10px;
                min-width: 200px;
                flex-grow: 1;
            }
            .stat-value { 
                font-size: 24px; 
                font-weight: bold; 
                margin: 10px 0;
            }
            .jobs-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }
            .jobs-table th, .jobs-table td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }
            .status-queued { color: #f9a602; }
            .status-processing { color: #1877f2; }
            .status-completed { color: #42b72a; }
            .status-failed { color: #ff0000; }
            .status-rate_limited { color: #ff8c00; }
            .status-content_violation { color: #8b0000; }
            .error-message {
                background-color: #ffdddd;
                border-left: 6px solid #f44336;
                padding: 10px;
                margin: 10px 0;
            }
        </style>
    </head>
    <body>
        <h1>Instagram Posting Monitor</h1>
        
        <div class="stats-container">
            <div class="stat-box">
                <h3>Queue Status</h3>
                <p>Pending Jobs: <span class="stat-value">{{stats.pending_jobs}}</span></p>
                <p>Active Jobs: <span class="stat-value">{{stats.active_jobs}}</span></p>
            </div>
            <div class="stat-box">
                <h3>Performance</h3>
                <p>Avg Processing Time: <span class="stat-value">{{stats.average_processing_time|round(1)}}s</span></p>
                <p>Success Rate: <span class="stat-value">{{success_rate|round(1)}}%</span></p>
            </div>
            <div class="stat-box">
                <h3>Results</h3>
                <p>Successful Posts: <span class="stat-value">{{stats.successful_posts}}</span></p>
                <p>Failed Posts: <span class="stat-value">{{stats.failed_posts}}</span></p>
            </div>
            <div class="stat-box">
                <h3>Issues</h3>
                <p>Rate Limited: <span class="stat-value">{{stats.rate_limited_posts}}</span></p>
                <p>Content Violations: <span class="stat-value">{{stats.content_violations}}</span></p>
            </div>
        </div>

        <div class="stat-box">
            <h3>System Resources</h3>
            <div class="stats-container">
                <div>
                    <p>CPU Usage: <span class="stat-value">{{system.cpu_percent}}%</span></p>
                    <p>Memory Usage: <span class="stat-value">{{system.memory_percent|round(1)}}%</span></p>
                </div>
                <div>
                    <p>Disk Usage: <span class="stat-value">{{system.disk_percent|round(1)}}%</span></p>
                    <p>Uptime: <span class="stat-value">{{system.uptime}}</span></p>
                </div>
            </div>
        </div>
        
        <h2>Recent Jobs</h2>
        <table class="jobs-table">
            <thead>
                <tr>
                    <th>Job ID</th>
                    <th>Status</th>
                    <th>Caption</th>
                    <th>Created</th>
                    <th>Completed</th>
                    <th>Error</th>
                </tr>
            </thead>
            <tbody>
                {% for job in jobs %}
                <tr>
                    <td>{{job.id[:8]}}...</td>
                    <td class="status-{{job.status}}">{{job.status}}</td>
                    <td>{{job.caption|truncate(30)}}</td>
                    <td>{{job.created_at|replace("T", " ")|truncate(19, True, "")}}</td>
                    <td>{{job.completed_at|replace("T", " ")|truncate(19, True, "") if job.completed_at else "-"}}</td>
                    <td>{{job.error|truncate(50) if job.error else "-"}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <footer style="margin-top: 30px; text-align: center; color: #666;">
            <p>Instagram Posting Monitoring System | Last updated: {{current_time}}</p>
        </footer>
    </body>
    </html>
    